# ============================================================================
# KERBEROS KDC CONFIGURATION FILE (kdc.conf)
# This file configures the KDC server behavior and database settings
# Only used by the KDC server itself, not by clients
# Ubuntu/Debian uses /var/lib/krb5kdc paths (different from CentOS/RHEL)
# ============================================================================

[kdcdefaults]
    # Default ports for KDC to listen on
    kdc_ports = 88          # Standard Kerberos port
    kdc_tcp_ports = 88      # TCP version of Kerberos port

[realms]
    # Configuration specific to our EXAMPLE.COM realm
    EXAMPLE.COM = {
        # Database files location - stored in persistent volume (Ubuntu paths)
        database_name = /var/lib/krb5kdc/principal
        
        # Admin keytab for kadmin operations
        admin_keytab = FILE:/var/lib/krb5kdc/kadm5.keytab
        
        # Access control list for admin operations
        acl_file = /var/lib/krb5kdc/kadm5.acl
        
        # Master key stash file (stores encrypted master key)
        key_stash_file = /var/lib/krb5kdc/stash
        
        # Network ports configuration
        kdc_ports = 88
        kdc_tcp_ports = 88
        
        # Ticket lifetime limits
        max_life = 10h 0m 0s           # Maximum ticket lifetime
        max_renewable_life = 7d 0h 0m 0s  # Maximum renewable lifetime
        
        # Encryption configuration
        master_key_type = aes256-cts   # Master key encryption type
        
        # Supported encryption types (strongest to weakest)
        supported_enctypes = aes256-cts:normal aes128-cts:normal des3-hmac-sha1:normal arcfour-hmac:normal camellia256-cts:normal camellia128-cts:normal
        
        # Default flags for new principals (require pre-authentication)
        default_principal_flags = +preauth
    }